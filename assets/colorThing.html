<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <script>
      var imageObj = new Image();
      imageObj.src = 'square_one.jpg';
    </script>
    <canvas id="myCanvas" width="578" height="400"></canvas>
    <script>
      function drawImage(imageObj) {
        var canvas = document.getElementById('myCanvas');
        var context = canvas.getContext('2d');
        var sideLength = Math.max(imageObj.height, imageObj.width);
        canvas.height = sideLength;
        canvas.width = sideLength;

        //// NUMBER OF GRID SQUARES
        var numSquares = 10;

        context.drawImage(imageObj, 0, 0, sideLength, sideLength);

        var imageData = context.getImageData(0, 0, sideLength, sideLength);
        var data = imageData.data;

        // "blurring" image through averaging colors

        var gridSideLength = sideLength / numSquares;

        for (var i = 0; i < numSquares; i++) {
          // col of grid
          for (var j = 0; j < numSquares; j++) {
            var rgb = {r:0,g:0,b:0};
            var count = 1;
            rgb.r = data[i * gridSideLength + j * gridSideLength];
            rgb.g = data[i * gridSideLength + j * gridSideLength + 1];
            rgb.b = data[i * gridSideLength + j * gridSideLength + 2];
            for (var y = 0; y < gridSideLength; y++) {
              // pixel col
              for (var x = 0; x < gridSideLength; x++) {
                rgb.r += data[(y * sideLength) + x];
              }
            }

        }

        // overwrite original image
        context.putImageData(imageData, 0, 0);
      }
      
      
      imageObj.onload = function() {
        drawImage(this);
      };
    </script>
  </body>
</html>      