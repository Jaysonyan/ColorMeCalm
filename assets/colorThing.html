<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <script>
      var imageObj = new Image();
      imageObj.src = 'square_one.jpg';
      imageObj.crossOrigin = "Anonymous";
    </script>
    <canvas id="myCanvas" width="578" height="400"></canvas>
    <script>
      function drawImage(imageObj) {
        var canvas = document.getElementById('myCanvas');
        var context = canvas.getContext('2d');
        var sideLength = Math.max(imageObj.height, imageObj.width);
        canvas.height = sideLength;
        canvas.width = sideLength;

        //// NUMBER OF GRID SQUARES
        var numSquares = 10;

        context.drawImage(imageObj, 0, 0, sideLength, sideLength);

        var imageData = context.getImageData(0, 0, sideLength, sideLength);
        var data = imageData.data;

        // "blurring" image through averaging colors

        var gridSideLength = sideLength / numSquares;
        var gridColors = [];
        var l = data[i*30];
        for (var i = 0; i < numSquares; i++) {
          // col of grid
          for (var j = 0; j < numSquares; j++) {
            var rgb = {r:0,g:0,b:0};
            var count = 0;
            
            for (var y = 0; y < gridSideLength; y++) {
              // pixel col
              for (var x = 0; x < gridSideLength; x++) {
                rgb.r += data[(i * gridSideLength) + (j * gridSideLength * sideLength) + (y * sideLength) + x];
                rgb.g += data[(i * gridSideLength) + (j * gridSideLength * sideLength) + (y * sideLength) + x + 1];
                rgb.b += data[(i * gridSideLength) + (j * gridSideLength * sideLength) + (y * sideLength) + x + 2];
                count++;
              }
            }

            rgb.r = Math.floor(rgb.r / count);
            rgb.g = Math.floor(rgb.g / count);
            rgb.b = Math.floor(rgb.b / count);
            gridColors.push(rgb.r, rgb.g, rgb.b);
            context.fillStyle = 'rgb(' + rgb.r + ', ' + rgb.g + ', ' + rgb.b + ', 0)';
            context.fillRect(j * gridSideLength, i * gridSideLength, gridSideLength, gridSideLength);
          }

        }
      }
      
      imageObj.onload = function() {
        drawImage(this);
      };
      
    </script>
  </body>
</html>      